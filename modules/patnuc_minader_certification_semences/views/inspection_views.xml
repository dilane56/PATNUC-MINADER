<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <data>

        <record id="view_cert_inspection_tree" model="ir.ui.view">
      <field name="name">cert.inspection.tree</field>
      <field name="model">certification.inspection</field>
      <field name="arch" type="xml">
        <tree>
          <field name="name"/>
          <field name="lot_id"/>
          <field name="inspector_id"/>
          <field name="state"/>
        </tree>
      </field>
    </record>

    <record id="view_cert_inspection_form" model="ir.ui.view">
      <field name="name">cert.inspection.form</field>
      <field name="model">certification.inspection</field>
      <field name="arch" type="xml">
        <form string="Inspection de lot">
          <header>
            <button string="Démarrer" type="object" name="action_start" class="btn-primary"
                    invisible="state != 'draft'"/>
            <button string="Terminer" type="object" name="action_done" class="btn-success"
                    invisible="state != 'in_progress'"/>
<!--            <button string="retour a l'etat precedant" invisible="state != 'done'" type="object" name="action_back_to_previous_state" class="btn-warning"/>-->
            <button string="Annuler" type="object" name="action_cancel" class="btn-secondary"
                   invisible="state == 'done'"/>
            <field name="state" widget="statusbar" statusbar_visible="draft,in_progress,done"/>
          </header>
          <sheet>
            <group>
              <field name="name" readonly="1"/>
              <field name="lot_id" readonly="1"/>
              <field name="parcelle_id" readonly="1"/>
            </group>
            <group string="Informations Générales">
              <group>
                 <field name="inspection_date" readonly="state !='in_progress'"/>
                <field name="visit_stage" readonly="state !='in_progress'"/>
                <field name="inspector_id" readonly="state !='in_progress'"/>
                  <field name="inspector_code" readonly="state !='in_progress'"/>
                <field name="multiplacator_name" readonly="state !='in_progress'"/>
                <field name="addresse" readonly="state !='in_progress'"/>
              </group>
              <group>
                <field name="seed_buyer" readonly="state !='in_progress'"/>
                <field name="lot_number_attribution" readonly="state !='in_progress'"/>
                <field name="support_structure" readonly="state !='in_progress'"/>
                <field name="gps_coordinates" readonly="state !='in_progress'"/>
                <field name="is_pancarte_implanted" widget="radio" options="{'horizontal': true}" readonly="state !='in_progress'"/>
              </group>

            </group>
            <group string="Informations sur le lot">
              <group>
                 <field name="espece" readonly="state !='in_progress'" />
                <field name="variety" readonly="state !='in_progress'"/>
                <field name="category" readonly="state !='in_progress'" />
                <field name="mother_seed_source" readonly="state !='in_progress'"/>
                <field name="is_mother_seed_certified" widget="radio" options="{'horizontal': true}"/>
              </group>
              <group>

                 <field name="region" readonly="state !='in_progress'"/>
                <field name="departement" readonly="state !='in_progress'"/>
                <field name="arrondissement" readonly="state !='in_progress'"/>
                <field name="inspected_area" widget="float_time" readonly="state !='in_progress'"/>
              <field name="seeding_date" readonly="state !='in_progress'"/>
              <field name="estimated_harvest_date" readonly="state !='in_progress'"/>
              <field name="estimated_yield" readonly="state !='in_progress'"/>
              </group>

            </group>


             <group string="Observations détaillées de l'Inspecteur" >
               <group>
                 <field name="isolation_status" widget="radio" options="{'horizontal': true}"/>
                 <field name="culture_maintenance_status"/>
                 <field name="multiplicator_present" widget="radio" options="{'horizontal': true}"/>
               </group>
               <group>
                 <field name="dangerous_weeds_names"/>
                 <field name="seed_transmissible_diseases_names"/>
                 <field name="non_transmissible_diseases_names"/>
               </group>
             </group>

            <group string="Suivi, Recomendations et Conclusion">
              <field name="is_last_inspection" widget="radio" options="{'horizontal': true}"/>
              <field name="next_inspection_date" invisible="is_last_inspection=='oui'"/>
              <field name="recommendation" readonly="state !='in_progress'"/>
              <field name="conclusion" readonly="state !='in_progress'"/>
              <field name="report_signed_by_farmer" readonly="state !='in_progress'"/>
               <field name="report_attachment" filename="report_filename" readonly="state !='in_progress'"/>
              <field name="report_filename" invisible="1"/>
            </group>

          </sheet>
          <footer>
            <button string="Retour à la liste" class="oe_highlight btn-secondary" special="cancel"/>
          </footer>
        </form>
      </field>
    </record>

       <record id="action_cert_inspection" model="ir.actions.act_window">
      <field name="name">Inspections</field>
      <field name="res_model">certification.inspection</field>
      <field name="view_mode">tree,form</field>
    </record>
    </data>
</odoo>